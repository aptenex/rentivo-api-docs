# Receipts

Receipts are line-item purchase data added to a transaction. They contain all the information about the purchase, including the products you bought, any taxes that were added on, and how you paid. They can also contain extra details about the merchant you spent money at, such as how to contact them, but this may not appear in the app yet.

This is the API currently used by [Flux](https://monzo.com/blog/2019/01/31/flux-monzo-launch/) to show receipts at selected retailers in your Monzo app.

##### Properties

```json
{
    "transaction_id": "tx_00...",
    "external_id": "Order-12345678",
    "total": 1299,
    "currency": "GBP",
    "items": [],
    "taxes": [],
    "payments": [],
    "merchant": {}
}
```

<span class="hide">Property</span> | <span class="hide">Description</span>
-----------------------------------|--------------------------------------
| `id`                         | A unique identifier generated by Monzo when you submit the receipt.                                                                |
| `external_id`<br><span class="label notice">Required</span>| A unique identifier generated by you, which is used as an idempotency key. You might use an order number for example.              |
| `transaction_id`<br><span class="label notice">Required</span>| The ID of the Transaction to associate the Receipt with.                                                                           |
| `total`<br><span class="label notice">Required</span>| The amount of the transaction in minor units of `currency`. For example pennies in the case of GBP. The amount should be positive. |
| `currency`<br><span class="label notice">Required</span>| Usually `GBP`, for Pounds Sterling.                                                                                                |
| `items`<br><span class="label notice">Required</span>| A list of [Items](#receipt-items) detailing the products included in the total.                                                                      |
| `taxes`                      | A list of [Taxes](#receipt-taxes) (e.g. VAT) added onto the total.                                                                                   |
| `payments`                   | A list of [Payments](#receipt-payments), indicating how the customer paid the total.                                                                    |
| `merchant`                   | The [Merchant](#receipt-merchant) you shopped at.<br>(This is a different type of object than the Merchant on a Transaction.)                           |


## Receipt Items

```json
[
    {
        "description": "Burger",
        "quantity": 1,
        "unit": "",
        "amount": 539,
        "currency": "GBP",
        "tax": 77,
        "sub_items": [
            {
                "description": "Extra cheese",
                "quantity": 1,
                "unit": "",
                "amount": 100,
                "currency": "GBP",
                "tax": 0
            },
            {
                "description": "Free extra topping promotion",
                "quantity": 1,
                "unit": "",
                "amount": -100,
                "currency": "GBP",
                "tax": 0
            }
        ]
    },
    {
        "description": "Fries",
        "quantity": 1,
        "unit": "",
        "amount": 139,
        "currency": "GBP",
        "tax": 19
    },
    {
        "description": "Milkshake",
        "quantity": 2,
        "unit": "",
        "amount": 198,
        "currency": "GBP",
        "tax": 38
    },
    {
        "description": "Bananas, ¬£1 per kg",
        "quantity": 0.3,
        "unit": "kg",
        "amount": 30,
        "currency": "GBP",
        "tax": 0
    }
]
```

Items detail each product that was included in the transaction. They let you see more detailed data in your Monzo feed than just how much you spent! üéâ

Items can be made up of sub-items, for example an extra topping on a burger. Sub-items have the same format as items (but they cannot in turn have their own sub-items!). The amounts of the sub-items should add up to amount on the item.

All of the items together, plus the taxes, should add up to the Receipt total.

##### Properties

<span class="hide">Property</span> | <span class="hide">Description</span>
-----------------------------------|--------------------------------------
| `description`<br><span class="label notice">Required</span>| The product you bought!                                                                                                                            |
| `amount`<br><span class="label notice">Required</span>| The amount paid for the item, in pennies.<br>If there are sub-items, this should be the total of their amounts.                                    |
| `currency`<br><span class="label notice">Required</span>| e.g. GBP                                                                                                                                           |
| `quantity`                | A number indicating how many of the product were bought, e.g. `2`.<br>A floating-point number, so it can represent weights like `1.23` for example |
| `unit`                    | The unit the quantity is measured in, e.g. `kg`                                                                                                    |
| `tax`                     | The tax, in pennies.                                                                                                                               |
| `sub_items`               | A list of sub-items, as described above                                                                                                            |


## Receipt Taxes


```json
[
    {
        "description": "VAT",
        "amount": 10,
        "currency": "GBP",
        "tax_number": "945719291"
    }
]
```

Taxes will be shown near the bottom of the receipt, just above the total.

##### Properties

<span class="hide">Property</span> | <span class="hide">Description</span>
| ------------------------- | ----------------------------------- |
| `description`<br><span class="label notice">Required</span>| e.g. ‚ÄúVAT‚Äù                          |
| `amount`<br><span class="label notice">Required</span>      | Total amount of the tax, in pennies |
| `currency`<br><span class="label notice">Required</span>| e.g. GBP                            |
| `tax_number`              | e.g. ‚Äú945719291‚Äù                    |



## Receipt Payments

```json
[
    {
      "type": "card",
      "bin": "543210",
      "last_four": "0987",
      "auth_code": "123456",
      "aid": "",
      "mid": "",
      "tid": "",
      "amount": 1000,
      "currency": "GBP"
    },
    {
      "type": "cash",
      "amount": 1000,
      "currency": "GBP"
    },
    {
      "type": "gift_card",
      "gift_card_type": "One4all",
      "amount": 1000,
      "currency": "GBP"
    }
]
```

Payments tell us how you paid for your purchase. While it will always include a card payment, sometimes a cash payment or a gift card is included as well. All of the payments together should add up to the Receipt total.

The payment details might not appear in the app just yet.

<span class="hide">Property</span> | <span class="hide">Description</span>
| ---------------------- | ------------------------------------------------------------- |
| `type`<br><span class="label notice">Required</span>| `card`, `cash`, or `gift_card`                                |
| `amount`<br><span class="label notice">Required</span>| Amount paid in pennies                                        |
| `currency`<br><span class="label notice">Required</span>| e.g. GBP                                                      |
| `last_four`            | The last four digits of the card number, for `card` Payments. |
| `gift_card_type`       | A description of the gift card, for `gift_card` Payments      |




## Receipt Merchant

The merchant gives us more information about where the purchase was made, to help us decide what to show at the top of the receipt.

<span class="hide">Property</span> | <span class="hide">Description</span>
| ---------------- | -------------------------------------------------------------------------------------------------- |
| `name`           | The merchant name                                                                                  |
| `online`         | `true` for Ecommerce merchants like Amazon<br>`false` for offline merchants like Pret or Starbucks |
| `phone`          | The phone number of the store                                                                      |
| `email`          | The merchant‚Äôs email address                                                                       |
| `store_name`     | The name of that particular store, e.g. `Old Street`                                               |
| `store_address`  | The store‚Äôs address                                                                                |
| `store_postcode` | The store‚Äôs postcode                                                                               |


## Create receipt

```shell
$ http PUT "https://api.monzo.com/transaction-receipts" \
    "Authorization: Bearer $access_token" \
    # ... JSON Receipt data ...
```

```json
{
  "transaction_id": "tx_00...", 
  "external_id": "test-receipt-1",
  "total": 1299,
  "currency": "GBP",
  "items": [
    {
      "description": "Bananas, 70p per kg",
      "quantity": 18.56,
      "unit": "kg",
      "amount": 70,
      "currency": "GBP"
    }
  ]
}
```

```json
{
    "receipt_id": "receipt_00009NrKwNtI3gKqte",
    ...
}
```

To attach a receipt to a transaction, make a `PUT` request to the `/transaction-receipts` API. Your request should include a body containing the receipt encoded as JSON.

<aside class="notice">
Unlike our earlier APIs, this API takes a JSON-encoded request body, rather than a form-encoded body.
</aside>

If you‚Äôre successful, you‚Äôll get back a `200 OK` HTTP response with an empty body. After that, the receipt will show up in your Monzo app!

The `external_id` is used as an idempotency key, so if you call this endpoint again with the same external ID, it will **update** the existing receipt.



## Retrieve receipt

You can read back a receipt that you've created based on its external ID.

Note that you'll only be able to read your own receipts in this way.


```
$ http GET "https://api.monzo.com/transaction-receipts" \
    "Authorization: Bearer $access_token" \
    "external_id==test-receipt-1"
```

```json
{
  "receipt": {
    "id": "receipt_00009eNJqNeJvKeoQA",
    "external_id": "test-receipt-1",
    ...
  }
}
```

##### Request arguments

<span class="hide">Parameter</span> | <span class="hide">Description</span>
------------------------------------|--------------------------------------
`external_id`<br><span class="label notice">Required</span>|The external ID of the receipt.


## Delete receipt


You can delete a receipt based on its external ID.

Note that you can also **update** an existing receipt, by [creating it again](#create-a-receipt) with different values.

```
$ http DELETE "https://api.monzo.com/transaction-receipts" \
    "Authorization: Bearer $access_token" \
    "external_id==test-receipt-1"
```

```json
{}
```

##### Request arguments

<span class="hide">Parameter</span> | <span class="hide">Description</span>
------------------------------------|--------------------------------------
`external_id`<br><span class="label notice">Required</span>|The external ID of the receipt.


